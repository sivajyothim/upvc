!function(t){t.fn.flipLightBox=function(i){function e(){1==z?w=P:(w=P,w+=z),t("."+w)[0]&&(t("."+w+" span").hide(),y=0,t("."+w).each(function(){y+=1,t(this).attr("class",w+"-"+y),null==v?v="."+w+"-"+y:v+=", ."+w+"-"+y}),R[w]=y,z++,e())}function o(t){var i=new Image;return i.src=t,i.width}function l(t){var i=new Image;return i.src=t,i.height}function g(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")}function n(){t("#flb-load").php('<div id="flb-loading-img"></div>').show(),setTimeout(function(){t("#flb-loading-img").php("<br />Loading Image")},500),setTimeout(function(){t("#flb-loading-img").prepend('<img width="5" src="'+T+'" /> ')},1e3),setTimeout(function(){t("#flb-loading-img").prepend('<img width="5" src="'+T+'" /> ')},1500),setTimeout(function(){t("#flb-loading-img").prepend('<img width="5" src="'+T+'" /> ')},2e3),setTimeout(function(){t("#flb-loading-img").fadeOut(500)},2500),_=setTimeout(function(){n()},3e3)}var b,a,h,d,x,f,c,_,r,s,p,u,m,A,w,y,v,k=t.extend({flip_mode:1,lightbox_background_opacity:.8,lightbox_border_width:10,lightbox_border_color:"#fff",lightbox_z_index:"1000",lightbox_flip_speed:800,lightbox_text_status:1,lightbox_text_style:"font-size: 14px; line-height: 1.4; color: #000; text-align: center;",lightbox_text_background_style:"background-color: #fff; opacity:0.8;",lightbox_text_area_position:"bottom",lightbox_navigation_status:1,next_image_text:"Next &rsaquo;&rsaquo;",back_image_text:"&lsaquo;&lsaquo; Back",next_and_back_image_text_style:"font-weight: bold; color: #000;",image_number_page:"Image",image_number_of:"of",image_number_text_style:"color: #000;",loading_text_color:"#fff",loading_text_opacity:"0.3"},i),T="data:image/gif;base64,R0lGODlhCgARAIABAP///////yH5BAEAAAEALAAAAAAKABEAAAIWTIBpl80No5y00gdXXBjxD4biSJZGAQA7",O="data:image/gif;base64,R0lGODlhMgAyAIABAP///////yH5BAEAAAEALAAAAAAyADIAAALPjI+py+0Po5y0HoCz3rx7/HziKDbkiWZLyp5Kd7VcvL01ImvJvOu2vPLhVAxgkTgEmVIOIQ0QcjWRT+i0dFUmqUFP1GmAZcE/sndsXfK2N3X6KGa3j5BPOW4JjO54ConfJ/HXMygoJWcXwUR46FZYtffVGIZiOKl3iXaGuDZx+egXyclVIQpJ1iPZSRnIqGrWKveqdTr71gWLOnrLd2erW1X2O4cr7GhqvHUMqszIi2mUDOnc4kudljO3Cp3djdsdfQ3OvDu+nYeerr7Ojl4AADs=",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi+P//PwNAgAEACPwC/tuiTRYAAAAASUVORK5CYII=",B="box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;",P="flipLightBox",z=1,R=new Array;e(),t(this).append('<div id="flb-lightbox" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: '+k.lightbox_z_index+"; "+B+'"><div id="flb-lightbox-background" style="width: 100%; height: 100%; background-color: #000; opacity:'+k.lightbox_background_opacity+"; "+B+'"></div><div id="flb-lightbox-content" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background: none; text-align: center; '+B+'"></div><div id="flb-load" style="position: fixed; top: 40%; left: 0px; width: 100%; text-align: center; font-size: 14px; color: '+k.loading_text_color+"; opacity: "+k.loading_text_opacity+"; "+B+'"></div><div id="flb-lightbox-text" style="position: fixed; '+k.lightbox_text_area_position+": 0px; width: 90%; padding-left: 5%; padding-right: 6%; margin-right: auto; margin-left: auto;"+k.lightbox_text_background_style+" "+k.lightbox_text_style+" "+B+' padding-top: 15px; padding-bottom: 15px;"></div><div id="flb-load2" style="position: fixed; top: 40%; left: 0px; width: 100%; text-align: center; font-size: 14px; color: '+k.loading_text_color+"; opacity: "+k.loading_text_opacity+';"></div>'),t("#flb-lightbox, #flb-lightbox-content, #flb-lightbox-text").hide(),t(v).click(function(i){i.preventDefault(),s=t(this).attr("href"),p=t(this).attr("class"),u=t("."+p+" span").php(),m=p.split("-"),A=R[m[0]],t("#flb-lightbox-text").php(""),null!=u&&""!=u&&1==k.lightbox_text_status&&(1==k.lightbox_navigation_status&&A>1&&t("#flb-lightbox-text").append("<br /><br />"),t("#flb-lightbox-text").append(u)),t("#flb-lightbox").fadeIn(k.lightbox_flip_speed/2),n(),r=document.createElement("img"),t("<img />").attr("src",s).load(function(){r.onload=function(){t("#flb-load").php(""),clearTimeout(_),t("#flb-lightbox-content").php('<img src="'+s+'" id="flb-lightbox-image" style="border: solid '+k.lightbox_border_width+"px "+k.lightbox_border_color+"; "+B+'"/>'),navigator.userAgent.match("CriOS")?(d=flb_image_width=r.width,h=flb_image_height=r.height):(d=flb_image_width=o(s),h=flb_image_height=l(s)),1!=k.lightbox_navigation_status&&1!=k.lightbox_text_status||1!=k.lightbox_navigation_status&&(null==u||""==u)||1>=A&&(null==u||""==u)||1>=A&&1!=k.lightbox_text_status?(t("#flb-lightbox-text").css("visibility","hidden"),flb_h=50):(t("#flb-lightbox-text").css("visibility","visible"),flb_h=70),t("#flb-lightbox-content").hide(),setTimeout(function(){function i(i){27==i.keyCode&&t("#flb-close").trigger("click")}t(window).resize(),t("#flb-lightbox-image").attr("src",s).css({width:b,height:h,opacity:0}),setTimeout(function(){t("#flb-lightbox-text").is(":hidden")&&(navigator.userAgent.match(/iPad/i)||g()?t("#flb-lightbox-text").show():t("#flb-lightbox-text").slideToggle())},k.lightbox_flip_speed),window.setTimeout(function(){t("#flb-lightbox-content").show(),t("#flb-lightbox-image").attr("src",s).animate({width:d,height:h,opacity:1},{duration:k.lightbox_flip_speed/2})},k.lightbox_flip_speed/2),a=h+2*k.lightbox_border_width+25,a=(t(window).height()-a)/2-(t("#flb-lightbox-text").height()/2+20)+x,0>a&&(a=10),t("#flb-lightbox-content").prepend('<img id="flb-close" src="'+I+'" width="25px" height="25px" alt="Close" style="margin-top: '+a+"px; margin-left: "+c+"px;"+B+'"/><br />'),t("#flb-close").click(function(){t(document).unbind("keyup",i),t("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),t("#flb-close").attr("src",I),t("#flb-lightbox-image").attr("src",s).animate({width:b,opacity:0},{duration:k.lightbox_flip_speed/2}),setTimeout(function(){t("#flb-lightbox").fadeOut(500),t("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||g()?t("#flb-lightbox-text").fadeOut():t("#flb-lightbox-text").slideToggle())},k.lightbox_flip_speed/2)}),window.setTimeout(function(){t("#flb-close").attr("src",O),clearTimeout(_)},k.lightbox_flip_speed),1==k.lightbox_navigation_status&&A>1&&(m[1]<A&&(t("#flb-lightbox-text").prepend('<a href="next" id="flb-next-pic" style="'+k.next_and_back_image_text_style+B+'">'+k.next_image_text+"</a>"),t("#flb-next-pic").click(function(e){t(document).unbind("keyup",i),t("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),t("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||g()?t("#flb-lightbox-text").fadeOut():t("#flb-lightbox-text").slideToggle()),e.preventDefault(),setTimeout(function(){t("."+m[0]+"-"+(Math.floor(m[1])+1)).trigger("click")},k.lightbox_flip_speed/2),t("#flb-close").attr("src",I),t("#flb-lightbox-image").attr("src",s).animate({width:b,opacity:0},{duration:k.lightbox_flip_speed/2})})),t("#flb-lightbox-text").prepend('<span style="'+k.image_number_text_style+B+'"> '+k.image_number_page+" "+m[1]+" "+k.image_number_of+" "+A+" </span>"),m[1]>1&&(t("#flb-lightbox-text").prepend('<a href="next" id="flb-back-pic" style="'+k.next_and_back_image_text_style+B+'">'+k.back_image_text+"</a>"),t("#flb-back-pic").click(function(e){t(document).unbind("keyup",i),t("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),t("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||g()?t("#flb-lightbox-text").fadeOut():t("#flb-lightbox-text").slideToggle()),e.preventDefault(),setTimeout(function(){t("."+m[0]+"-"+(Math.floor(m[1])-1)).trigger("click")},k.lightbox_flip_speed/2),t("#flb-close").attr("src",I),t("#flb-lightbox-image").attr("src",s).animate({width:b,opacity:0},{duration:k.lightbox_flip_speed/2})}))),t(document).keyup(i)},100)},r.src=s}).error(function(){t("#flb-load").php(""),clearTimeout(_),setTimeout(function(){clearTimeout(_)},3e3),t("#flb-lightbox").fadeOut(500),t("#flb-lightbox-content, #flb-lightbox-text").php(""),t("#flb-lightbox-text").hide()})}),t(window).resize(function(){f=1,t(window).height()<flb_image_height+t("#flb-lightbox-text").height()+flb_h+2*k.lightbox_border_width&&(h=t(window).height()-2*k.lightbox_border_width-t("#flb-lightbox-text").height()-flb_h,d=flb_image_width/flb_image_height*h,f=0),t(window).width()<flb_image_width+60+2*k.lightbox_border_width&&t(window).width()-flb_image_width<t(window).height()-flb_image_height-(t("#flb-lightbox-text").height()+flb_h)&&(d=t(window).width()-2*k.lightbox_border_width-60,h=flb_image_height/flb_image_width*d,f=0),1==f&&(d=flb_image_width,h=flb_image_height),x="top"==k.lightbox_text_area_position&&70==flb_h?2*(t("#flb-lightbox-text").height()/2+15):0,t("#flb-lightbox-image").css({width:d,height:h}),a=h+2*k.lightbox_border_width+25,a=(t(window).height()-a)/2-(t("#flb-lightbox-text").height()/2+20)+x,0>a&&(a=10),t("#flb-close").css({"margin-top":a,"margin-left":t(window).width()-85+2*k.lightbox_border_width+(t("#flb-lightbox-text").height()/2+20)-x}),c=d+25+2*k.lightbox_border_width,t("#flb-close").attr("style","margin-top: "+a+"px; margin-left: "+c+"px; "+B),b=0==k.flip_mode?d:0})}}(jQuery);